"use strict";(()=>{var e={};e.id=773,e.ids=[773],e.modules={867:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{db:()=>d});var o=r(8932),n=r(4337),i=e([o,n]);[o,n]=i.then?(await i)():i;let s=(0,o.initializeApp)({apiKey:"AIzaSyBj6QysY8iakOIolvgxdVIQFISrkWKLSls",authDomain:"user-data-ff2ef.firebaseapp.com",projectId:"user-data-ff2ef",storageBucket:"user-data-ff2ef.firebasestorage.app",messagingSenderId:"256585563027",appId:"1:256585563027:web:002cbebe818faf9ebec666",measurementId:"G-V3BQPCTJGG"}),d=(0,n.getFirestore)(s);a()}catch(e){a(e)}})},1428:e=>{e.exports=import("axios")},2706:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},4337:e=>{e.exports=import("firebase/firestore")},4636:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>d});var o=r(1428),n=r(4337),i=r(867),s=e([o,n,i]);[o,n,i]=s.then?(await s)():s;let c=async e=>(await o.default.post("https://portal.packzy.com/api/v1/create_order",{invoice:e.invoice,recipient_name:e.recipient_name,recipient_phone:e.recipient_phone,recipient_address:e.recipient_address,cod_amount:e.cod_amount,note:e.note},{headers:{"Api-Key":"your-steadfast-api-key","Secret-Key":"your-steadfast-secret-key","Content-Type":"application/json"}})).data,p=async e=>(await o.default.post("https://api.redx.com/order/create",{invoice:e.invoice,recipient_name:e.recipient_name,recipient_phone:e.recipient_phone,recipient_address:e.recipient_address,cod_amount:e.cod_amount,note:e.note},{headers:{"Api-Key":"your-redx-api-key","Content-Type":"application/json"}})).data;async function d(e,t){if("GET"!==e.method)return t.status(405).json({message:"Method not allowed"});try{for(let e of(await (0,n.getDocs)((0,n.collection)(i.db,"orders"))).docs){let t=e.data();if(!t.sent)try{"steadfast"===t.courier?await c(t):"redx"===t.courier&&await p(t),await (0,n.updateDoc)((0,n.doc)(i.db,"orders",e.id),{sent:!0}),console.log("Sent order:",t.invoice)}catch(e){console.error("Error sending order:",e.message)}}return t.status(200).json({message:"All orders processed"})}catch(e){return console.error("Failed to process orders:",e.message),t.status(500).json({error:"Internal server error"})}}a()}catch(e){a(e)}})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},8932:e=>{e.exports=import("firebase/app")},9777:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>p,default:()=>c,routeModule:()=>u});var o=r(9947),n=r(2706),i=r(6762),s=r(4636),d=e([s]);s=(d.then?(await d)():d)[0];let c=(0,i.M)(s,"default"),p=(0,i.M)(s,"config"),u=new o.PagesAPIRouteModule({definition:{kind:n.A.PAGES_API,page:"/api/submitorder",pathname:"/api/submitorder",bundlePath:"",filename:""},userland:s});a()}catch(e){a(e)}})},9947:(e,t,r)=>{e.exports=r(5600)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=9777);module.exports=r})();